---
- name: create group
  group:
    name: honeypot

- name: add user
  user:
    name: honeypot
    state: present
    groups: honeypot

- name: install packages
  yum: name={{ item }}
  with_items:
    - firewalld
    - logrotate
    - http://ftp.riken.jp/Linux/fedora/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm

- name: start firewalld automatically
  systemd:
    name: firewalld.service
    state: started
    daemon_reload: yes
    enabled: yes

- name: open port
  firewalld:
    port: "{{ ansible_port }}/tcp"
    permanent: true
    immediate: true
    state: enabled
